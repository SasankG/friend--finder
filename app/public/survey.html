<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" integrity="sha384-zF4BRsG/fLiTGfR9QL82DrilZxrwgY/+du4p/c7J72zZj+FLYq4zY00RylP9ZjiT" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>Survey</h1>
        <hr>
        <form class="form">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" required>
            </div>

            <hr>
            <h1>Answer to the best of your ability below.</h1>
            <p>The Program will match you with a friend!</p>
            <div class="form-group">
                <label for="q1" class="lead">You like to travel.</label>
                <select id="q1" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q2" class="lead">Math is your favorite subject</label>
                <select id="q2" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q3" class="lead">Javascript is your favorite language</label>
                <select id="q3" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q4" class="lead">You own a Nintendo Console</label>
                <select id="q4" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q5" class="lead">You watch anime.</label>
                <select id="q5" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q6" class="lead">You have been to atleast 4 different countries.</label>
                <select id="q6" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q7" class="lead">Biology is your favorite subject.</label>
                <select id="q7" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1 </option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q8" class="lead">You like cars.</label>
                <select id="q8" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 </option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q9" class="lead">You play sports.</label>
                <select id="q9" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <br />
            <div class="form-group">
                <label for="q10" class="lead">You like Mexican food.</label>
                <select id="q10" class="form-control" required>
                    <option value="" selected disabled>Please select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <br />
            <button type="button" id="submit" class="btn btn-lg" data-toggle="modal" data-target="#modal"><i class="fa fa-check-square" aria-hidden="true"></i> Submit</button>
        </form>
        <br />
        <footer class="footer">
            <div class="container">
            </div>
        </footer>
    </div>
    <div class="modal fade" id="modal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    </body>
    <script type="text/javascript">
       $(document).ready(function() {
    $("#submit").on("click", function() {
        //form validation
        function validateForm() {
            var isValid = true;
            /*
            $('.validate').each(function() {
                if ($(this).val() === ''){
                    isValid = false;
                }
            });
            */
            $('.form-control').each(function() {
                if ($(this).val() === ""){
                    isValid = false;
                }
            });
            return isValid;
        }
        //if everything is filled
        if (validateForm() == true) {
            var newPerson = {
                name: $('#name').val(),
                scores: [
                    $('#q1').val(),
                    $('#q2').val(),
                    $('#q3').val(),
                    $('#q4').val(),
                    $('#q5').val(),
                    $('#q6').val(),
                    $('#q7').val(),
                    $('#q8').val(),
                    $('#q9').val(),
                    $('#q10').val(),
                ]
            };
           
            var currentURL = window.location.origin;
           
            $.post(currentURL + "/api/friends", newPerson, function(data) {
                //Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $(".modal-title").text("Your match is: " + data.name);
                $(".modal-body").text("Your matches scores were: " + data.scores)
            });
         
                $('.modal').show();
           
            $('#name').val("");
            $('#q1').val("");
            $('#q2').val("");
            $('#q3').val("");
            $('#q4').val("");
            $('#q5').val("");
            $('#q6').val("");
            $('#q7').val("");
            $('#q8').val("");
            $('#q9').val("");
            $('#q10').val("");
        } else {
            alert("Please answer all questions");
        }
       
    });
});
    </script>
    </html>